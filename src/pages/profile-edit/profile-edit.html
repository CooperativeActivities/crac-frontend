<ion-header>
  <!-- navbar intentionally left out -->
  <ion-toolbar>
    <ion-title>Profil bearbeiten</ion-title>
  </ion-toolbar>
  <ion-toolbar>
    <div class="toolbar-buttons">
      <button ion-button (click)="cancel()" color="light" block>
        Abbrechen
      </button>
      <button ion-button (click)="save_changes()" color="secondary" block>
        Speichern
      </button>
    </div>
  </ion-toolbar>
</ion-header>
<ion-content>
  <ng-template [ngIf]="user != undefined">
    <form name="userForm" onsubmit="event.preventDefault" novalidate>
      <ion-card>
        <ion-card-header>
          Userinformation
        </ion-card-header>

        <ion-card-content>
          <ion-list>
            <ion-item>
              <ion-label stacked>Username</ion-label>
              <ion-input type="text" name="name" required
                         [(ngModel)]="user.name" #name="ngModel"></ion-input>
              <ion-icon item-end name="alert" color="danger"
                        *ngIf="(name.touched || name.dirty) && name.invalid"></ion-icon>
            </ion-item>
            <ion-item *ngIf="(name.touched || name.dirty) && name.invalid && name.errors.required" class="form-error">
              Bitte geben Sie einen Usernamen ein.
            </ion-item>
            <ion-item>
              <ion-label stacked>Email</ion-label>
              <!-- email validator by default marks empty email as invalid (angular 4.3.6),
                   so not empty check needed -->
              <ion-input type="email" name="email" [email]="user.email != ''"
                         #email="ngModel" [(ngModel)]="user.email"></ion-input>
              <ion-icon item-end name="alert" color="danger"
                        *ngIf="email.touched && email.invalid"></ion-icon>
            </ion-item>
            <ion-item *ngIf="email.touched && email.invalid" class="form-error">
              Bitte geben Sie eine gültige Email ein.
            </ion-item>
            <ion-item>
              <ion-label stacked>Vorname</ion-label>
              <ion-input type="text" [(ngModel)]="user.firstName" name="firstName"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label stacked>Nachname</ion-label>
              <ion-input type="text" [(ngModel)]="user.lastName" name="lastName"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label stacked>Adresse</ion-label>
              <ion-input type="text" [(ngModel)]="user.address" name="address"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label stacked>Telefonnummer</ion-label>
              <ion-input type="text" name="phone" phoneNumber
                         #phone="ngModel" [(ngModel)]="user.phone"></ion-input>
              <ion-icon item-end name="alert" color="danger"
                        *ngIf="phone.touched && phone.invalid"></ion-icon>
            </ion-item>
            <ion-item *ngIf="phone.touched && phone.invalid" class="form-error">
              Bitte geben Sie eine gültige Telefonnumber ein.
            </ion-item>
            <ion-item>
              <ion-label stacked>Geburtstag</ion-label>
              <ion-datetime displayFormat="DD-MM-YYYY" [(ngModel)]="user.birthDate" name="birthDate"
                            [min]="minimumDate" [max]="maximumDate"></ion-datetime>
            </ion-item>
          </ion-list>
        </ion-card-content>
      </ion-card>

      <ion-card>
        <ion-card-header>
          Profilfoto
        </ion-card-header>
        <ion-card-content>
          <ion-list>
            <ion-item>
              <img item-left src="assets/img/avatar-placeholder1.png">
              <ion-label><!--
                <h2>Foto aktualisieren</h2>
                <button ion-button block icon-left color="light">
                  <ion-icon name="image"></ion-icon>
                  Foto hochladen
                </button>
                <button ion-button block icon-left color="light">
                  <ion-icon name="camera"></ion-icon>
                  Foto machen
                </button>-->
              </ion-label>
            </ion-item>
          </ion-list>
        </ion-card-content>
      </ion-card>
    </form>
  </ng-template>
</ion-content>
