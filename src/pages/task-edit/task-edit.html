<!--
  Generated template for the TaskEditPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>{{pageTitle}}</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
  <form name="taskForm" onsubmit="event.preventDefault" novalidate>
    <ion-card>
      <ion-card-content>
        <ion-grid radio-group [(ngModel)]="task.taskType" name="type" *ngIf="isNewTask" class="form-group">
          <ion-row>
            <ion-col no-padding>
              <ion-item>
                <ion-label>Übersicht</ion-label>
                <ion-radio value="ORGANISATIONAL"></ion-radio>
              </ion-item>
            </ion-col>
            <ion-col no-padding>
              <ion-item>
                <ion-label>Aufgabe</ion-label>
                <ion-radio value="WORKABLE"></ion-radio>
              </ion-item>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-content>
    </ion-card>

    <ion-card>
      <ion-card-header>
        Basisinformationen
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item>
            <ion-label stacked>Titel*</ion-label>
            <ion-input type="text" [(ngModel)]="task.name" name="name" style="background-color:white;"
                       aria-describedby="inputError2Status" class="form-control" required></ion-input>
            <!-- @TODO reimplement validation
            <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"
                  *ngIf="taskForm.name.$dirty && taskForm.name.$invalid"></span>
            <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"
                  *ngIf="taskForm.name.$dirty && taskForm.name.$valid"></span>
            <span id="inputError2Status" class="help-block"><!-- *ngIf="taskForm.name.$dirty && taskForm.name.$invalid">
              Bitte geben Sie einen Tasktitel ein.
            </span>
            -->
          </ion-item>
          <ion-item class="item item-input item-stacked-label">
            <ion-label stacked>Beschreibung</ion-label>
            <ion-textarea [(ngModel)]="task.description" name="description" ></ion-textarea>
          </ion-item>
          <ion-item class="item item-input item-stacked-label" *ngIf="task.taskType == 'WORKABLE'">
            <ion-label stacked>Zahl der Freiwilligen</ion-label>
            <ion-input type="number" min="0"
                       [(ngModel)]="task.minAmountOfVolunteers" name="minAmountOfVolunteers"></ion-input>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>

    <ion-card>
      <ion-card-header>
        Zeit und Ort
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item>
            <ion-label stacked>Beginn*</ion-label>
            <ion-input type="datetime-local" [(ngModel)]="task.startTime" name="startTime"
                       [ngClass]="{'has-error' : !task.startTime}"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label stacked>Ende</ion-label>
            <ion-input type="datetime-local" [(ngModel)]="task.endTime" name="endTime"></ion-input>
          </ion-item>
          <ion-item>
            <!-- @TODO uncomment when map view is ready
            <button ion-button icon-only (click)="openMap()" item-right>
              <ion-icon name="locate"></ion-icon>
            </button>
            -->
            <ion-label stacked>Adresse
            </ion-label>
            <ion-input type="text" [(ngModel)]="task.address" name="address"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label stacked>Ortsbezeichnung</ion-label>
            <ion-input type="text" [(ngModel)]="task.location" name="location"></ion-input>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>
  </form>
</ion-content>

<!--
    <div ng-if="isNewTask && task.taskType == 'WORKABLE'">
      <button type="button" ng-click="add_details()" class="button button-full button-positive ion-plus no-border-radius"> Details hinzufügen</button>
    </div>

    <div ng-if="!isNewTask && task.taskType == 'WORKABLE'">
      <c-accordion title="' Details '">
        <ion-list >
          <ion-item class="item-icon-right" ng-click="advancedEdit('competences')">
            Kompetenzen ({{task.taskCompetences.length}})
            <i class="icon ion-chevron-right"></i>
          </ion-item>
          <ion-item class="item-icon-right" ng-click="advancedEdit('shifts')">
            Schichten ({{task.childTasks.length}})
            <i class="icon ion-chevron-right"></i>
          </ion-item>
          <ion-item class="item-icon-right" ng-click="advancedEdit('materials')">
            Materialen ({{task.materials.length}})
            <i class="icon ion-chevron-right"></i>
          </ion-item>
        </ion-list>
      </c-accordion>
    </div>



  </ion-content>
  <ion-footer-bar>
    <div class="button-bar">
      <button ng-click="delete()" ng-if="showDelete"  class="button button-small button-full no-border-radius button-assertive ion-trash-a"> Löschen </button>
      <button ng-click="save_and_unpublish()"   ng-if="showUnpublish" class="button button-small button-full no-border-radius button-positive ion-eye-disabled"> Zurückziehen </button>
      <button ng-click="save_and_publish()"   ng-if="showPublish" class="button button-small button-full no-border-radius button-balanced ion-eye"> Veröffentlichen </button>
    </div>
  </ion-footer-bar>
</ion-view>
-->
